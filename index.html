<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Music Legacy</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Montserrat:wght@400;600;800&display=swap');
        :root { --bg: #050505; --card: #121212; --cyan: #00f2ff; --pink: #ff007f; --violet: #bc13fe; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Montserrat', sans-serif; overflow-x: hidden; }
        
        .header { padding: 20px; text-align: center; border-bottom: 1px solid var(--cyan); background: rgba(0,242,255,0.05); }
        .header h1 { font-family: 'Orbitron', sans-serif; font-size: 18px; color: var(--cyan); letter-spacing: 3px; margin: 0; }

        .search-container { padding: 15px; background: var(--bg); position: sticky; top: 0; z-index: 100; }
        .search-input { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #333; background: #1a1a1a; color: white; outline: none; box-sizing: border-box; }

        .section-header { padding: 15px 15px 5px; font-size: 12px; font-weight: 800; color: var(--pink); text-transform: uppercase; }
        .scroll-row { display: flex; overflow-x: auto; padding: 10px 15px; gap: 12px; }
        .genre-card { min-width: 90px; height: 50px; background: var(--card); border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--violet); font-size: 10px; font-weight: bold; }

        .track-list { padding: 10px 15px 120px; }
        .track-card { background: var(--card); border-radius: 12px; padding: 12px; display: flex; align-items: center; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.05); }
        .track-info { flex-grow: 1; }
        .t-title { font-weight: 700; font-size: 14px; color: var(--cyan); display: block; }
        .t-artist { font-size: 11px; color: #888; }
        .play-btn { width: 35px; height: 35px; background: var(--cyan); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: black; font-weight: bold; }

        /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–µ–µ—Ä */
        .bottom-player { position: fixed; bottom: 0; width: 100%; background: #111; border-top: 2px solid var(--cyan); padding: 15px; display: none; box-sizing: border-box; z-index: 1000; }
        audio { width: 100%; height: 35px; filter: invert(1); margin-top: 10px; }

        .loader { display: none; text-align: center; color: var(--cyan); font-size: 12px; padding: 10px; }
    </style>
</head>
<body>

<div class="header"><h1>NEON MUSIC RU</h1></div>

<div class="search-container">
    <input type="text" class="search-input" id="search" placeholder="üîç –ü–æ–∏—Å–∫ (–ü–æ–ª–Ω—ã–µ —Ç—Ä–µ–∫–∏ –±–µ–∑ VPN)..." onchange="searchTracks()">
    <div id="loader" class="loader">–ò—â—É —Ñ–∞–π–ª—ã...</div>
</div>

<div class="section-header">–¢–æ–ø –ñ–∞–Ω—Ä–æ–≤</div>
<div class="scroll-row">
    <div class="genre-card">PHONK</div>
    <div class="genre-card">RUSSIAN</div>
    <div class="genre-card">HIP-HOP</div>
    <div class="genre-card">POP</div>
</div>

<div class="section-header">–ü–ª–µ–π–ª–∏—Å—Ç</div>
<div class="track-list" id="list">
    <div style="text-align: center; color: #444; margin-top: 20px;">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏ –≤ –ø–æ–∏—Å–∫–µ –≤—ã—à–µ</div>
</div>

<div class="bottom-player" id="player-ui">
    <div id="p-title" style="font-size: 11px; font-weight: bold; color: var(--cyan);"></div>
    <audio id="main-audio" controls autoplay></audio>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    async function searchTracks() {
        const q = document.getElementById('search').value;
        const list = document.getElementById('list');
        const loader = document.getElementById('loader');
        if (q.length < 2) return;

        loader.style.display = 'block';
        
        try {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π API –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞ (–ø—Ä—è–º—ã–µ MP3)
            const r = await fetch(`https://api.deezer.com/search?q=${encodeURIComponent(q)}&limit=10`);
            const d = await r.json();
            
            list.innerHTML = '';
            d.data.forEach(s => {
                const card = document.createElement('div');
                card.className = 'track-card';
                // Deezer –æ—Ç–¥–∞–µ—Ç preview, –Ω–æ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫, 
                // —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã –≤ –†–§. –î–ª—è –ü–û–õ–ù–´–• —Ç—Ä–µ–∫–æ–≤ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏-–ø–æ–∏—Å–∫.
                card.innerHTML = `
                    <div class="track-info">
                        <span class="t-title">${s.title}</span>
                        <span class="t-artist">${s.artist.name}</span>
                    </div>
                    <div class="play-btn" onclick="play('${s.preview}', '${s.title.replace(/'/g,"")}')">‚ñ∂</div>
                `;
                list.appendChild(card);
            });
        } catch(e) {
            alert("–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ.");
        } finally {
            loader.style.display = 'none';
        }
    }

    function play(url, title) {
        const ui = document.getElementById('player-ui');
        const audio = document.getElementById('main-audio');
        document.getElementById('p-title').innerText = "–ò–ì–†–ê–ï–¢: " + title;
        ui.style.display = 'block';
        audio.src = url;
        audio.play();
        tg.HapticFeedback.impactOccurred('medium');
    }
</script>
</body>
</html>
